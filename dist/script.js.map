{"version":3,"sources":["../script.js"],"names":[],"mappings":"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","file":"script.js","sourcesContent":["const watchers = {};\n\nfunction init() {\n  const scale = 0.5;\n\n  const videoFile = document.getElementById(\"uploadInput\").files[0];\n  const leftMoves = files[videoFile.name.replace('.mp4', '')].left;\n  const rightMoves = files[videoFile.name.replace('.mp4', '')].right;\n  const leftPositions = files[videoFile.name.replace('.mp4', '')].leftPosition;\n  const rightPositions = files[videoFile.name.replace('.mp4', '')].rightPosition;\n  for (var i = 0; i < 240; i++) {\n    $('#result tbody').append(`\n      <tr id=\"event-${i}\">\n        <th>#${i+1}, ${leftMoves[i]}</th>\n        <td class=\"leftResult\"></td>\n        <th>#${i+1}, ${rightMoves[i]}</th>\n        <td class=\"rightResult\"></td>\n      </tr>\n    `);\n  }\n  const videoURL = URL.createObjectURL(videoFile);\n  const player = document.getElementById('player');\n  const leftResults = [];\n  const rightResults = [];\n\n  player.src = videoURL;\n\n  const c2 = document.getElementById('c2');\n  const ctx2 = c2.getContext('2d');\n\n  player.addEventListener('canplay', function () {\n    $('#uploadInput').hide();\n    player.currentTime = 0.5; // Triggers seek\n\n    $('#container').width(player.videoWidth * scale);\n\n    c2.width = player.videoWidth * scale;\n    c2.height = player.videoHeight * scale;\n  });\n\n  player.addEventListener('seeked', function () {\n    ctx2.drawImage(player, 0, 0, c2.width, c2.height);\n\n    $('.left-hand .position').text(JSON.stringify(leftPositions.LH));\n    addWatcher('LLH', leftPositions.LH);\n    $('.center-hand .position').text(JSON.stringify(leftPositions.CH));\n    addWatcher('LCH', leftPositions.CH);\n    $('.right-hand .position').text(JSON.stringify(leftPositions.RH));\n    addWatcher('LRH', leftPositions.RH);\n    $('.left-foot .position').text(JSON.stringify(leftPositions.LF));\n    addWatcher('LLF', leftPositions.LF);\n    $('.center-foot .position').text(JSON.stringify(leftPositions.CF));\n    addWatcher('LCF', leftPositions.CF);\n    $('.right-foot .position').text(JSON.stringify(leftPositions.RF));\n    addWatcher('LRF', leftPositions.RF);\n\n    addWatcher('RLH', rightPositions.LH);\n    addWatcher('RCH', rightPositions.CH);\n    addWatcher('RRH', rightPositions.RH);\n    addWatcher('RLF', rightPositions.LF);\n    addWatcher('RCF', rightPositions.CF);\n    addWatcher('RRF', rightPositions.RF);\n\n    $('#panel').show();\n  }, false);\n\n  $('#startProcess').click(() => {\n    $('#LLHMask').attr('x', watchers.LLH.left).attr('y', watchers.LLH.top).attr('width', watchers.LLH.width).attr('height', watchers.LLH.height);\n    $('#LCHMask').attr('x', watchers.LCH.left).attr('y', watchers.LCH.top).attr('width', watchers.LCH.width).attr('height', watchers.LCH.height);\n    $('#LRHMask').attr('x', watchers.LRH.left).attr('y', watchers.LRH.top).attr('width', watchers.LRH.width).attr('height', watchers.LRH.height);\n    $('#LLFMask').attr('x', watchers.LLF.left).attr('y', watchers.LLF.top).attr('width', watchers.LLF.width).attr('height', watchers.LLF.height);\n    $('#LCFMask').attr('x', watchers.LCF.left).attr('y', watchers.LCF.top).attr('width', watchers.LCF.width).attr('height', watchers.LCF.height);\n    $('#LRFMask').attr('x', watchers.LRF.left).attr('y', watchers.LRF.top).attr('width', watchers.LRF.width).attr('height', watchers.LRF.height);\n    $('#RLHMask').attr('x', watchers.RLH.left).attr('y', watchers.RLH.top).attr('width', watchers.RLH.width).attr('height', watchers.RLH.height);\n    $('#RCHMask').attr('x', watchers.RCH.left).attr('y', watchers.RCH.top).attr('width', watchers.RCH.width).attr('height', watchers.RCH.height);\n    $('#RRHMask').attr('x', watchers.RRH.left).attr('y', watchers.RRH.top).attr('width', watchers.RRH.width).attr('height', watchers.RRH.height);\n    $('#RLFMask').attr('x', watchers.RLF.left).attr('y', watchers.RLF.top).attr('width', watchers.RLF.width).attr('height', watchers.RLF.height);\n    $('#RCFMask').attr('x', watchers.RCF.left).attr('y', watchers.RCF.top).attr('width', watchers.RCF.width).attr('height', watchers.RCF.height);\n    $('#RRFMask').attr('x', watchers.RRF.left).attr('y', watchers.RRF.top).attr('width', watchers.RRF.width).attr('height', watchers.RRF.height);\n    $('#mask').show();\n    $('#startProcess, #watchers').hide();\n    player.play();\n    next();\n  });\n\n  function addWatcher(which, positions) {\n    var data = JSON.parse(JSON.stringify(positions));\n    const frame = ctx2.getImageData(data.left, data.top, data.width, data.height);\n    data.reference = frame.data;\n\n    watchers[which] = data;\n  }\n\n  function next() {\n    if (player.paused || player.ended) {\n      return;\n    }\n    computeFrame();\n    window.requestAnimationFrame(next);\n  }\n\n  function computeFrame() {\n    ctx2.drawImage(player, 0, 0, c2.width, c2.height);\n    const currentItem = Math.floor((player.currentTime - 100 / 120) * 100 / 120);\n    if (currentItem >= 0) {\n\n      $('#result tr').removeClass('current');\n      for (let i = 0; i < currentItem; i++) {\n        $('#event-' + i).addClass('completed');\n      }\n      $('#event-' + currentItem).addClass('current');\n\n      const data = watchers['L' + leftMoves[currentItem]];\n      const frame = ctx2.getImageData(data.left, data.top, data.width, data.height);\n      var diff = 0;\n      for (var j = 0; j < frame.data.length; j++) {\n        if (j % 4 !== 3) diff += Math.abs(frame.data[j] - data.reference[j]);\n      }\n      diff = diff / frame.data.length;\n      if (diff > 10 && !leftResults[currentItem]) {\n        const result = (player.currentTime - 100 / 120) - currentItem * 120 / 100;\n        leftResults[currentItem] = result;\n        $('#event-' + currentItem + ' .leftResult').text(result.toFixed(5))\n      }\n\n      const data2 = watchers['R' + rightMoves[currentItem]];\n      const frame2 = ctx2.getImageData(data2.left, data2.top, data2.width, data2.height);\n      var diff2 = 0;\n      for (var j = 0; j < frame2.data.length; j++) {\n        if (j % 4 !== 3) diff2 += Math.abs(frame2.data[j] - data2.reference[j]);\n      }\n      diff2 = diff2 / frame2.data.length;\n      if (diff2 > 10 && !rightResults[currentItem]) {\n        const result2 = (player.currentTime - 100 / 120) - currentItem * 120 / 100;\n        rightResults[currentItem] = result2;\n        $('#event-' + currentItem + ' .rightResult').text(result2.toFixed(5))\n      }\n    }\n  }\n  player.addEventListener('ended', function () {\n    console.log('end');\n  });\n}\n"]}